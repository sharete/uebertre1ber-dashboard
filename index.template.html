<!DOCTYPE html>
<html lang="de" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>uebertre1ber Dashboard // PRO</title>
  <meta name="description"
    content="FACEIT ELO Dashboard ‚Äì Live tracking, stats, and analysis for the uebertre1ber crew." />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
    rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
          mono: ['JetBrains Mono', 'monospace'],
        },
        extend: {
          colors: {
            faceit: '#FF5500',
            dark: '#050510',
            'neon-blue': '#00f2ff',
            'neon-purple': '#bd00ff',
            // Accessibility: Blue/Orange Palette
            'success': '#3b82f6', // blue-500
            'success-dim': 'rgba(59, 130, 246, 0.1)',
            'danger': '#f97316', // orange-500
            'danger-dim': 'rgba(249, 115, 22, 0.1)',
            
            'glass-border': 'rgba(255, 255, 255, 0.05)',
            'glass-bg': 'rgba(20, 20, 30, 0.4)',
          },
          backgroundImage: {
            'cyber-gradient': 'linear-gradient(135deg, rgba(5,5,16,1) 0%, rgba(10,10,30,1) 50%, rgba(5,5,16,1) 100%)',
          },
          boxShadow: {
            'neon': '0 0 10px rgba(0, 242, 255, 0.3), 0 0 20px rgba(0, 242, 255, 0.1)',
            'neon-orange': '0 0 10px rgba(255, 85, 0, 0.3), 0 0 20px rgba(255, 85, 0, 0.1)',
          },
          animation: {
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>
  <style>
    body {
      background-color: #050510;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(0, 242, 255, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(189, 0, 255, 0.05) 0%, transparent 40%);
      background-attachment: fixed;
    }

    /* Spatial UI & Noise */
    .noise-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 50;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }

    .glass-panel, .stat-card {
      background: rgba(20, 20, 30, 0.6);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stat-card {
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      background: rgba(255, 255, 255, 0.03);
      box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
    }

    /* Dynamic Border Glows - Accessible Blue/Orange */
    .glow-border-green {
      border-color: rgba(59, 130, 246, 0.5);
      box-shadow: 0 0 15px rgba(59, 130, 246, 0.2), inset 0 0 20px rgba(59, 130, 246, 0.05);
    }

    .glow-border-red {
      border-color: rgba(249, 115, 22, 0.5);
      box-shadow: 0 0 15px rgba(249, 115, 22, 0.2), inset 0 0 20px rgba(249, 115, 22, 0.05);
    }

    /* Bento Grid */
    .bento-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #050510;
    }

    ::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #FF5500;
    }

    .text-glow { text-shadow: 0 0 10px rgba(255, 255, 255, 0.3); }
    .text-glow-blue { text-shadow: 0 0 10px rgba(59, 130, 246, 0.6); }
    .text-glow-orange { text-shadow: 0 0 10px rgba(249, 115, 22, 0.6); }

    .level-badge {
      clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
    }
  </style>
</head>

<body class="min-h-screen text-gray-200 font-sans selection:bg-neon-blue selection:text-black">

  <div class="noise-overlay"></div>

  <!-- Background Mesh -->
  <div class="fixed inset-0 pointer-events-none z-[-1] overflow-hidden">
    <div class="absolute top-[-20%] left-[20%] w-[60%] h-[60%] bg-blue-500/5 rounded-full blur-[150px] animate-pulse-slow"></div>
    <div class="absolute bottom-[-20%] right-[20%] w-[60%] h-[60%] bg-purple-500/5 rounded-full blur-[150px]" style="animation-delay: 2s"></div>
  </div>

  <!-- Header -->
  <header class="py-10 flex flex-col items-center justify-center gap-6 relative">
    <div class="absolute top-0 w-full h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>

    <div class="relative group cursor-pointer hover:scale-105 transition-transform duration-500">
      <div class="absolute -inset-2 bg-gradient-to-r from-faceit to-orange-600 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition duration-500"></div>
      <img src="icons/levels/uebertreiber_logo.png" alt="uebertre1ber" class="relative w-64 md:w-80 drop-shadow-2xl" />
    </div>

    <!-- Hero Stats Grid -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 w-full max-w-6xl px-4 mt-4 hero-stats-grid">
      <!-- The King -->
      <div class="glass-panel p-4 rounded-xl flex items-center gap-4 relative overflow-hidden group">
        <div class="absolute right-0 top-0 w-24 h-24 bg-yellow-500/10 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-yellow-500/20 transition"></div>
        <div class="w-12 h-12 rounded-lg bg-yellow-500/10 flex items-center justify-center text-2xl">üëë</div>
        <div>
          <p class="text-xs uppercase tracking-widest text-white/40 font-bold">The King</p>
          <p id="hero-king-name" class="font-bold text-white text-lg tracking-tight">‚Äî</p>
          <p id="hero-king-elo" class="font-mono text-yellow-500 text-sm">0 ELO</p>
        </div>
      </div>

      <!-- MVP -->
      <div class="glass-panel p-4 rounded-xl flex items-center gap-4 relative overflow-hidden group">
        <div class="absolute right-0 top-0 w-24 h-24 bg-green-500/10 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-green-500/20 transition"></div>
        <div class="w-12 h-12 rounded-lg bg-green-500/10 flex items-center justify-center text-2xl">üî•</div>
        <div>
          <p class="text-xs uppercase tracking-widest text-white/40 font-bold">MVP</p>
          <p id="hero-mvp-name" class="font-bold text-white text-lg tracking-tight">‚Äî</p>
          <p id="hero-mvp-diff" class="font-mono text-green-400 text-sm">+0</p>
        </div>
      </div>

      <!-- Opfer -->
      <div class="glass-panel p-4 rounded-xl flex items-center gap-4 relative overflow-hidden group">
        <div class="absolute right-0 top-0 w-24 h-24 bg-red-500/10 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-red-500/20 transition"></div>
        <div class="w-12 h-12 rounded-lg bg-red-500/10 flex items-center justify-center text-2xl">üíÄ</div>
        <div>
          <p class="text-xs uppercase tracking-widest text-white/40 font-bold">Opfer</p>
          <p id="hero-down-name" class="font-bold text-white text-lg tracking-tight">‚Äî</p>
          <p id="hero-down-diff" class="font-mono text-red-400 text-sm">-0</p>
        </div>
      </div>

      <!-- Tracked -->
      <div class="glass-panel p-4 rounded-xl flex items-center gap-4 relative overflow-hidden group">
        <div class="absolute right-0 top-0 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-blue-500/20 transition"></div>
        <div class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center text-2xl">üìä</div>
        <div>
          <p class="text-xs uppercase tracking-widest text-white/40 font-bold">Tracked</p>
          <p class="font-bold text-white text-lg tracking-tight"><span class="text-blue-400"><!-- INSERT_PLAYER_COUNT --></span> Players</p>
          <p class="text-xs text-white/30">Live Updates</p>
        </div>
      </div>
    </div>
  </header>

  <main class="flex-grow w-full max-w-7xl mx-auto p-4 flex flex-col gap-8 z-10">

    <!-- Controls Toolbar -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 px-2">
      <!-- Search -->
      <div class="relative w-full sm:w-64">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input id="searchInput" type="text" placeholder="Spieler suchen (Name)..."
          class="w-full pl-10 pr-4 py-2.5 rounded-xl bg-[#0a0a14]/80 border border-gray-700/50 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-neon-blue/50 focus:shadow-neon transition-all backdrop-blur-sm" />
      </div>
      <!-- Time Filter -->
      <div class="flex items-center gap-2 bg-[#0a0a14]/80 p-1.5 rounded-xl border border-gray-700/50 shadow-lg backdrop-blur-sm overflow-x-auto max-w-full">
        <button class="time-filter active px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all bg-white/10 text-white shadow-inner" data-val="daily">Daily</button>
        <button class="time-filter px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider text-gray-400 hover:text-white hover:bg-white/5 transition-all" data-val="weekly">Weekly</button>
        <button class="time-filter px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider text-gray-400 hover:text-white hover:bg-white/5 transition-all" data-val="monthly">Monthly</button>
        <button class="time-filter px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider text-gray-400 hover:text-white hover:bg-white/5 transition-all" data-val="yearly">Yearly</button>
      </div>
    </div>

    <!-- Awards Section -->
    <section id="awards-section" class="px-2">
      <h2 class="text-xs uppercase tracking-widest text-white/30 font-bold mb-4 flex items-center gap-2">
        <span>üèÜ</span> Awards (Last 30 Matches)
      </h2>
      <!-- INSERT_AWARDS_SECTION -->
    </section>

    <!-- Main Bento Grid -->
    <div id="playerGrid" class="bento-grid px-2">
      <!-- INSERT_ELO_CARDS_HERE -->
    </div>

    <!-- ELO Comparison Chart -->
    <section id="comparison-section" class="px-2 mt-4">
      <h2 class="text-xs uppercase tracking-widest text-white/30 font-bold mb-4 flex items-center gap-2">
        <span>üìà</span> ELO Vergleich
      </h2>
      <div id="comparison-chips" class="flex flex-wrap gap-2 mb-4"></div>
      <div class="glass-panel rounded-xl p-4 relative overflow-hidden">
        <div class="h-64 w-full">
          <canvas id="comparison-chart"></canvas>
        </div>
      </div>
    </section>

    <div class="text-center text-xs text-white/20 mt-4 mb-4">
      Last Update: <span class="text-white/40 font-mono"><!-- INSERT_LAST_UPDATED --></span>
    </div>

  </main>

  <!-- Footer -->
  <footer class="py-6 text-center z-10 relative">
    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-panel text-xs text-white/40 hover:text-white/60 transition-colors">
      <span>Dashboard by <a href="https://www.faceit.com/de/players/sha-" target="_blank" class="font-bold text-white hover:text-neon-blue transition-colors">sha</a></span>
    </div>
  </footer>

  <script>window.ELO_DATA = null;</script>
  <!-- INSERT_HISTORY_DATA -->
  <!-- INSERT_COMPARISON_DATA -->

  <script>
    // --- State ---
    let currentRange = 'daily';

    // --- DOM Elements ---
    const playerGrid = document.getElementById('playerGrid');
    const searchInput = document.getElementById('searchInput');
    const filterButtons = document.querySelectorAll('.time-filter');

    // --- Core Logic ---
    function updateView() {
      try {
        const snap = window.ELO_DATA ? window.ELO_DATA[currentRange] : null;
        if (!snap) return;

        const lookup = Object.fromEntries(snap.map(p => [p.playerId, p.elo]));
        let bestDiff = -9999;
        let worstDiff = 9999;
        let mvpName = "‚Äî";
        let downName = "‚Äî";
        let kingElo = -1;
        let kingName = "‚Äî";

        document.querySelectorAll(".stat-card").forEach(card => {
          card.style.display = '';
          const pid = card.dataset.playerId;
          const currentElo = parseInt(card.dataset.elo || 0);
          const name = card.dataset.nickname;

          if (currentElo > kingElo) {
            kingElo = currentElo;
            kingName = name;
          }

          const prev = lookup[pid];
          const diffEl = card.querySelector(".elo-diff");
          let diffVal = 0;

          if (prev == null) {
              if(diffEl) diffEl.innerHTML = '<span class="text-white/20">‚Äî</span>';
          } else {
            const diff = currentElo - prev;
            diffVal = diff;
            const isPlus = diff > 0;
            const isZero = diff === 0;
            const color = isPlus ? 'text-green-400' : (isZero ? 'text-gray-500' : 'text-red-400');
            const sign = isPlus ? '+' : '';
            if(diffEl) diffEl.innerHTML = `<span class="${color}">${sign}${diff}</span>`;
          }

          card.dataset.diff = diffVal;
          if (diffVal > bestDiff) { bestDiff = diffVal; mvpName = name; }
          if (diffVal < worstDiff) { worstDiff = diffVal; downName = name; }
        });

        // Hero Stats Logic
        if (worstDiff >= 0) {
          if (worstDiff > 0) {
            document.getElementById('hero-down-name').textContent = downName;
            document.getElementById('hero-down-diff').textContent = "+" + worstDiff + " üòÖ";
            document.getElementById('hero-down-diff').className = "font-mono text-sm text-yellow-400";
          } else {
            document.getElementById('hero-down-name').textContent = "Alle im Plus üí™";
            document.getElementById('hero-down-diff').textContent = "¬±0";
            document.getElementById('hero-down-diff').className = "font-mono text-sm text-gray-500";
          }
        } else {
          document.getElementById('hero-down-name').textContent = downName;
          document.getElementById('hero-down-diff').textContent = worstDiff;
          document.getElementById('hero-down-diff').className = "font-mono text-sm text-red-400";
        }

        document.getElementById('hero-king-name').textContent = kingName;
        document.getElementById('hero-king-elo').textContent = kingElo + " ELO";

        if (bestDiff > 0) {
          document.getElementById('hero-mvp-name').textContent = mvpName;
          document.getElementById('hero-mvp-diff').textContent = "+" + bestDiff;
          document.getElementById('hero-mvp-diff').className = "font-mono text-sm text-green-400";
        } else {
          document.getElementById('hero-mvp-name').textContent = "Keiner am Grinden üò¥";
          document.getElementById('hero-mvp-diff').textContent = "¬±0";
          document.getElementById('hero-mvp-diff').className = "font-mono text-sm text-gray-500";
        }

      } catch (e) {
        console.error("Update View Error", e);
      }
    }

    // --- Event Listeners ---
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase().trim();
      document.querySelectorAll(".stat-card").forEach(card => {
        const name = (card.dataset.nickname || "").toLowerCase();
        card.style.display = (!query || name.includes(query)) ? '' : 'none';
      });
    });

    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        filterButtons.forEach(b => {
          b.className = "time-filter px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider text-gray-400 hover:text-white hover:bg-white/5 transition-all";
        });
        btn.className = "time-filter active px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-neon";
        currentRange = btn.dataset.val;
        updateView();
      });
    });

    // --- Chart Initialization (Progressive Disclosure) ---
    // Instead of on-demand rendering on mobile, we can render robust charts inside the details panel
    // or keep them lightweight. For now, we reuse the existing logic but adapted for cards.
    const charts = {};

    document.addEventListener("click", e => {
       // Handle "Show Details" button or click on card
       const btn = e.target.closest('.toggle-details-btn');
       if (!btn) return;

       const card = btn.closest('.stat-card');
       const details = card.querySelector('.card-details');
       const icon = btn.querySelector('.icon-chevron');

       if (details.classList.contains('hidden')) {
         details.classList.remove('hidden');
         icon.style.transform = 'rotate(180deg)';

         // Init ELO History Chart if not exists
         const canvas = details.querySelector('canvas'); // The first canvas is ELO history
         const pid = card.dataset.playerId;

         if (canvas && !charts[pid]) {
             const hist = JSON.parse(canvas.dataset.history || "[]");
             if (hist.length) {
                const ctx = canvas.getContext('2d');
                const gradient = ctx.createLinearGradient(0, 0, 0, 200);
                gradient.addColorStop(0, 'rgba(59, 130, 246, 0.2)'); // Blue
                gradient.addColorStop(1, 'rgba(59, 130, 246, 0)');

                charts[pid] = new Chart(ctx, {
                  type: 'line',
                  data: {
                    labels: hist.map(h => new Date(h.date * 1000).toLocaleDateString()),
                    datasets: [{
                      data: hist.map(h => h.elo),
                      borderColor: '#3b82f6', // Success Blue
                      backgroundColor: gradient,
                      borderWidth: 2,
                      pointBackgroundColor: '#3b82f6',
                      pointRadius: 0,
                      pointHoverRadius: 4,
                      fill: true,
                      tension: 0.4
                    }]
                  },
                  options: {
                    responsive: true, maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    plugins: { legend: { display: false }, tooltip: { mode: 'index', intersect: false } },
                    scales: {
                      x: { display: false },
                      y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#666' } }
                    }
                  }
                });
             }
         }

         // Init Radar Chart (Map Winrates)
         const radarCanvas = details.querySelector('.radar-chart');
         if (radarCanvas && !radarCanvas.chart) {
             const radarData = JSON.parse(radarCanvas.dataset.radar || "{}");
             if (radarData.labels && radarData.labels.length) {
                 radarCanvas.chart = new Chart(radarCanvas, {
                     type: 'radar',
                     data: {
                         labels: radarData.labels,
                         datasets: [{
                             label: 'Winrate %',
                             data: radarData.data,
                             borderColor: '#f97316', // Orange
                             backgroundColor: 'rgba(249, 115, 22, 0.2)',
                             pointBackgroundColor: '#f97316',
                             borderWidth: 1.5,
                             pointRadius: 2
                         }]
                     },
                     options: {
                         responsive: true, maintainAspectRatio: false,
                         scales: {
                             r: {
                                 angleLines: { color: 'rgba(255,255,255,0.05)' },
                                 grid: { color: 'rgba(255,255,255,0.05)' },
                                 pointLabels: { color: 'rgba(255,255,255,0.5)', font: { size: 9 } },
                                 ticks: { display: false, backdropColor: 'transparent' },
                                 suggestedMin: 0,
                                 suggestedMax: 100
                             }
                         },
                         plugins: { legend: { display: false } }
                     }
                 });
             }
         }

       } else {
         details.classList.add('hidden');
         icon.style.transform = 'rotate(0deg)';
       }
    });


    // --- Comparison Chart (Reused) ---
    const CHART_COLORS = ['#00f2ff', '#FF5500', '#bd00ff', '#22c55e', '#eab308', '#f43f5e', '#3b82f6', '#a855f7'];
    let comparisonChart = null;
    const selectedPlayers = new Set();

    function initComparisonSection() {
      const data = window.COMPARISON_DATA;
      if (!data || !data.length) return;
      const container = document.getElementById('comparison-chips');
      data.forEach((p, i) => {
        const chip = document.createElement('button');
        chip.className = 'comparison-chip px-3 py-1.5 rounded-full text-xs font-bold border border-white/10 bg-white/5 text-white/60 hover:text-white flex items-center gap-2 transition-all';
        chip.dataset.playerId = p.id;
        chip.dataset.colorIndex = i % CHART_COLORS.length;
        chip.innerHTML = `<div class="w-2 h-2 rounded-full" style="background:\${CHART_COLORS[i % CHART_COLORS.length]}"></div>\${p.nickname}`;
        chip.addEventListener('click', () => {
            toggleComparisonPlayer(p.id, chip);
        });
        container.appendChild(chip);
      });
    }

    function toggleComparisonPlayer(id, chip) {
      if (selectedPlayers.has(id)) {
        selectedPlayers.delete(id);
        chip.classList.remove('bg-white/20', 'text-white');
        chip.classList.add('bg-white/5', 'text-white/60');
      } else {
        selectedPlayers.add(id);
        chip.classList.add('bg-white/20', 'text-white');
        chip.classList.remove('bg-white/5', 'text-white/60');
      }
      updateComparisonChart();
    }

    function updateComparisonChart() {
      const data = window.COMPARISON_DATA;
      if (!data) return;
      const canvas = document.getElementById('comparison-chart');
      const ctx = canvas.getContext('2d');
      if (comparisonChart) comparisonChart.destroy();
      const MAX_MATCHES = 30;
      const datasets = [];
      const selected = data.filter(p => selectedPlayers.has(p.id));

      selected.forEach((p, i) => {
        const chip = document.querySelector(`.comparison-chip[data-player-id="\${p.id}"]`);
        const colorIdx = chip ? parseInt(chip.dataset.colorIndex) : i;
        const color = CHART_COLORS[colorIdx % CHART_COLORS.length];
        const recent = p.history.slice(-MAX_MATCHES);
        datasets.push({
          label: p.nickname,
          data: recent.map(h => h.elo),
          borderColor: color,
          backgroundColor: 'transparent',
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 4,
          tension: 0.4
        });
      });

      if (datasets.length === 0) { comparisonChart = null; return; }

      comparisonChart = new Chart(ctx, {
        type: 'line',
        data: { labels: Array.from({length: MAX_MATCHES}, (_, i) => i + 1), datasets },
        options: {
          responsive: true, maintainAspectRatio: false,
          interaction: { mode: 'index', intersect: false },
          plugins: { legend: { display: true, labels: { color: '#888' } } },
          scales: {
             x: { grid: { color: 'rgba(255,255,255,0.05)' } },
             y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#666' } }
          }
        }
      });
    }

    // Init Logic
    window.addEventListener('DOMContentLoaded', () => {
       initComparisonSection();
       updateView(); // Initial view populate
    });

  </script>
</body>
</html>