name: FACEIT ELO Auto Update

on:
  schedule:
    - cron: "*/30 * * * *"  # alle 30 Minuten automatisch

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Repo auschecken
        uses: actions/checkout@v3

      - name: ğŸ› ï¸ jq installieren
        run: sudo apt-get update && sudo apt-get install -y jq

      - name: ğŸŸ¢ AusfÃ¼hrrechte setzen
        run: chmod +x ./get_elos_from_ids.sh

      - name: ğŸ§  FACEIT Script ausfÃ¼hren
        env:
          FACEIT_API_KEY: ${{ secrets.FACEIT_API_KEY }}
        run: ./get_elos_from_ids.sh

      - name: ğŸ” Ã„nderungen committen und pushen
        run: |
          git config user.name "faceit-bot"
          git config user.email "faceit-bot@localhost"
          git add index.html
          git commit -m "Auto-Update: $(date)" || echo "Keine Ã„nderungen"
          git push
